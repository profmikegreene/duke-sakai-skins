(function(document,$){var proto=$.fn,details,isOpera=Object.prototype.toString.call(window.opera)=="[object Opera]",isDetailsSupported=function(doc){var el=doc.createElement("details"),fake,root,diff;if(!("open"in el)){return false}root=doc.body||function(){var de=doc.documentElement;fake=true;return de.insertBefore(doc.createElement("body"),de.firstElementChild||de.firstChild)}();el.innerHTML="<summary>a</summary>b";el.style.display="block";root.appendChild(el);diff=el.offsetHeight;el.open=true;diff=diff!=el.offsetHeight;root.removeChild(el);if(fake){root.parentNode.removeChild(root)}return diff}(document),toggleOpen=function($details,$detailsSummary,$detailsNotSummary,toggle){var isOpen=$details.prop("open"),close=isOpen&&toggle||!isOpen&&!toggle;if(close){$details.removeClass("open").prop("open",false).triggerHandler("close.details");$detailsSummary.attr("aria-expanded",false);$detailsNotSummary.hide()}else{$details.addClass("open").prop("open",true).triggerHandler("open.details");$detailsSummary.attr("aria-expanded",true);$detailsNotSummary.show()}};proto.noSelect=function(){var none="none";return this.bind("selectstart dragstart mousedown",function(){return false}).css({MozUserSelect:none,msUserSelect:none,webkitUserSelect:none,userSelect:none})};if(isDetailsSupported){details=proto.details=function(){return this.each(function(){var $details=$(this),$summary=$("summary",$details).first();$summary.attr({role:"button","aria-expanded":$details.prop("open")}).on("click",function(){var close=$details.prop("open");$summary.attr("aria-expanded",!close);$details.triggerHandler((close?"close":"open")+".details")})})};details.support=isDetailsSupported}else{details=proto.details=function(){return this.each(function(){var $details=$(this),$detailsSummary=$("summary",$details).first(),$detailsNotSummary=$details.children(":not(summary)"),$detailsNotSummaryContents=$details.contents(":not(summary)");if(!$detailsSummary.length){$detailsSummary=$("<summary>").text("Details").prependTo($details)}if($detailsNotSummary.length!=$detailsNotSummaryContents.length){$detailsNotSummaryContents.filter(function(){return this.nodeType==3&&/[^ \t\n\f\r]/.test(this.data)}).wrap("<span>");$detailsNotSummary=$details.children(":not(summary)")}$details.prop("open",typeof $details.attr("open")=="string");toggleOpen($details,$detailsSummary,$detailsNotSummary);$detailsSummary.attr("role","button").noSelect().prop("tabIndex",0).on("click",function(){$detailsSummary.focus();toggleOpen($details,$detailsSummary,$detailsNotSummary,true)}).keyup(function(event){if(32==event.keyCode||13==event.keyCode&&!isOpera){event.preventDefault();$detailsSummary.click()}})})};details.support=isDetailsSupported}})(document,$PBJQ);